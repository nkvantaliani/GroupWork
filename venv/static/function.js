const quizData = {
    1: [
        {
            question: "What is the sum of the interior angles of a triangle?",
            options: ["90Â°", "120Â°", "180Â°", "360Â°"],
            answer: "180Â°"
        },
        {
            question: "What is the area of a rectangle with length 10 cm and width 4 cm?",
            options: ["14 cmÂ²", "24 cmÂ²", "40 cmÂ²", "44 cmÂ²"],
            answer: "40 cmÂ²"
        },
        {
            question: "What is the perimeter of a square with side length 5 cm?",
            options: ["15 cm", "20 cm", "25 cm", "30 cm"],
            answer: "20 cm"
        },
        {
            question: "A circle has a radius of 7 cm. What is its diameter?",
            options: ["7 cm", "10 cm", "14 cm", "21 cm"],
            answer: "14 cm"
        },
        {
            question: "What is the volume of a cube with side length 3 cm?",
            options: ["9 cmÂ³", "18 cmÂ³", "27 cmÂ³", "36 cmÂ³"],
            answer: "27 cmÂ³"
        }
    ],
    2: [
            {
                question: "What does HTML stand for?",
                options: [
                    "Hyper Text Markup Language", 
                    "Home Tool Markup Language", 
                    "Hyperlinks and Text Markup Language", 
                    "High-Level Text Management Language"
                ],
                answer: "Hyper Text Markup Language"
            },
            {
                question: "Which symbol is used to start a comment in Python?",
                options: ["#", "//", "/*", "<!--"],
                answer: "#"
            },
            {
                question: "Which of these is a JavaScript framework?",
                options: ["Django", "Flask", "React", "Laravel"],
                answer: "React"
            },
            {
                question: "What is the correct syntax to print a message in Python?",
                options: [
                    "print 'Hello World!'", 
                    "echo('Hello World!')", 
                    "console.log('Hello World!')", 
                    "print('Hello World!')"
                ],
                answer: "print('Hello World!')"
            },
            {
                question: "Which keyword is used to declare a variable in JavaScript?",
                options: ["var", "let", "const", "All of the above"],
                answer: "All of the above"
            }
        ],
        3:
        [
            {
                question: "Who did Baby Gronk allegedly 'rizz up'?",
                options: [
                    "Livvy Dunne", 
                    "Charli Dâ€™Amelio", 
                    "Bella Poarch", 
                    "Addison Rae"
                ],
                answer: "Livvy Dunne"
            },
            {
                question: "What does it mean if someone is a â€˜Sigma Maleâ€™?",
                options: [
                    "Theyâ€™re the alpha of the alphas", 
                    "Theyâ€™re a lone wolf", 
                    "They have no rizz", 
                    "They just vibe"
                ],
                answer: "Theyâ€™re a lone wolf"
            },
            {
                question: "What is Baby Gronk known for?",
                options: [
                    "Being the future of football", 
                    "Eating 10 pancakes in one sitting", 
                    "Winning a Fortnite tournament", 
                    "Being the Rizz King"
                ],
                answer: "Being the future of football"
            },
            {
                question: "Whatâ€™s the signature look of a â€˜Sigma Boyâ€™?",
                options: [
                    "Hands in pockets, blank stare", 
                    "Sunglasses indoors", 
                    "A hoodie with mysterious vibes", 
                    "All of the above"
                ],
                answer: "All of the above"
            },
            {
                question: "Whatâ€™s the ultimate Sigma move?",
                options: [
                    "Walking away in silence", 
                    "Ignoring the haters", 
                    "Refusing to elaborate", 
                    "All of the above"
                ],
                answer: "All of the above"
            }
        ],
    4: 
    [
        {
            question: "What is the primary function of a CPU in a computer?",
            options: [
                "Store data", 
                "Run applications", 
                "Display graphics", 
                "Cool the system"
            ],
            answer: "Run applications"
        },
        {
            question: "What does GPU stand for?",
            options: [
                "Graphics Processing Unit", 
                "General Processing Unit", 
                "Gaming Processing Unit", 
                "Global Processing Unit"
            ],
            answer: "Graphics Processing Unit"
        },
        {
            question: "Which component is responsible for long-term data storage in a computer?",
            options: [
                "RAM", 
                "SSD", 
                "GPU", 
                "Motherboard"
            ],
            answer: "SSD"
        },
        {
            question: "What is the primary purpose of RAM in a computer?",
            options: [
                "Store files permanently", 
                "Increase internet speed", 
                "Provide temporary storage for active processes", 
                "Increase gaming performance"
            ],
            answer: "Provide temporary storage for active processes"
        },
        {
            question: "Which of the following is a popular gaming graphics card manufacturer?",
            options: [
                "Intel", 
                "Nvidia", 
                "AMD", 
                "Both Nvidia and AMD"
            ],
            answer: "Both Nvidia and AMD"
        }
    ],
    5:
    [
        {
            question: "What is Flask in web development?",
            options: [
                "A Python web framework", 
                "A JavaScript library", 
                "A database management system", 
                "A CSS framework"
            ],
            answer: "A Python web framework"
        },
        {
            question: "Which of the following is used to define routes in Flask?",
            options: [
                "@route", 
                "@app.route", 
                "@flask.route", 
                "@define.route"
            ],
            answer: "@app.route"
        },
        {
            question: "What does the `render_template()` function do in Flask?",
            options: [
                "Renders HTML files", 
                "Processes form data", 
                "Handles requests", 
                "Serves static files"
            ],
            answer: "Renders HTML files"
        },
        {
            question: "In Flask, what is the default folder for static files like images, CSS, and JavaScript?",
            options: [
                "static", 
                "assets", 
                "public", 
                "files"
            ],
            answer: "static"
        },
        {
            question: "What is the Flask function used to run the development server?",
            options: [
                "flask.run()", 
                "app.run()", 
                "server.run()", 
                "dev.run()"
            ],
            answer: "app.run()"
        }
    ],
    6:
    [
        {
            question: "Which agent in Valorant is known for using a â€˜Phoenixâ€™ ability to heal and create walls of fire?",
            options: [
                "Phoenix", 
                "Brimstone", 
                "Sage", 
                "Raze"
            ],
            answer: "Phoenix"
        },
        {
            question: "What type of weapon is the â€˜Vandalâ€™ in Valorant?",
            options: [
                "Shotgun", 
                "Sniper", 
                "Rifle", 
                "SMG"
            ],
            answer: "Rifle"
        },
        {
            question: "Which agent in Valorant has the ultimate ability called â€˜Resurrectionâ€™?",
            options: [
                "Sage", 
                "Breach", 
                "Jett", 
                "Omen"
            ],
            answer: "Sage"
        },
        {
            question: "Which Valorant map features a location called â€˜A Heavenâ€™?",
            options: [
                "Bind", 
                "Ascent", 
                "Split", 
                "Icebox"
            ],
            answer: "Split"
        },
        {
            question: "What is the main function of the â€˜Smokeâ€™ ability in Valorant?",
            options: [
                "Healing teammates", 
                "Blocking vision", 
                "Planting bombs", 
                "Dealing damage"
            ],
            answer: "Blocking vision"
        }
    ]
    
    
};

let currentQuestionIndex = 0;
let score = 0;
const currentquiz = document.getElementById("question");
const quizContainer = document.getElementById('quiz');
const optionsContainer = document.getElementById('options');
const scoreElement = document.getElementById('score');
const username = document.getElementById("usernamee").textContent.trim(); // vighebt texts usernamess!
const urlParams = new URLSearchParams(window.location.search);
const quizId = parseInt(urlParams.get('quiz'));//vighebt quizid-s romelic aweria website urlshi ðŸ¥°


function loadQuestion() {
    const quizId = parseInt(urlParams.get('quiz'), 10);


    // vamowmebt tu questionindex metia tvit raodenobaze 
    if (currentQuestionIndex >= quizData[quizId].length) {
        console.error('Current question index is out of bounds.');
        return;
    }
    //vighet questiondatas index ita da id it
    const questionData = quizData[quizId][currentQuestionIndex];

    //quizz name vighebt
    currentquiz.innerHTML = questionData.question;
    
    optionsContainer.innerHTML = '';
    //uqmnis 4buttons 4options da mere sleectanwser amowmebs tu swore anwser aris archeuli da imisda mixedvit ematebat score
    questionData.options.forEach(option => {
        const optionButton = document.createElement('button');
        optionButton.classList.add('option');
        optionButton.textContent = option;
        optionButton.addEventListener('click', () => selectAnswer(option));
        optionsContainer.appendChild(optionButton);
});
}
//amowmebs correct anwsers selectedanwsertan tu udris umatebs 1-s tuarada ubralod index zrdis shemdegi question isatvis
function selectAnswer(selectedAnswer) {
    const correctAnswer = quizData[quizId][currentQuestionIndex].answer;

    if (selectedAnswer === correctAnswer) {
        score++;
    }

    currentQuestionIndex++;

    if (currentQuestionIndex < quizData[quizId].length) {
        loadQuestion();
        //tu kidev aris question ebi anu axladeni index naklebia raodenobaze questionebis grdzeldeba es loop da function isev iwyeba
    } else {
        showResult();
        //tu araris raodenoba meti length ze ubralod final answer gamodis
    }

    scoreElement.textContent = score;
    //final scores vighebt
}

function showResult() {
    currentquiz.innerHTML = "Quiz Complete!";
    //gamodis quiz complete text
    optionsContainer.innerHTML = `<p>Your final score is: ${score} out of ${quizData[quizId].length}</p>`;
    //gamodis final score shaushi
    saveScore(score);
    //savedeba score localstorage shi
}


// username viyenebt score saving isatvis
function saveScore(currentScore) {
    const user = username || 'guest'; // tu username available araris (logined araris) guest title gadaecema

    // localstorage dan vighebt scores
    let scores = JSON.parse(localStorage.getItem('scores')) || {};

 // tu localstorageshi ver ipova object qmnis mas
 if (!scores[user]) {
    scores[user] = {}; 
}

    // shevinaxot current score userid is
    scores[user][quizId] = currentScore;

    // localstorage shi shevinaxot ukan score
    localStorage.setItem('scores', JSON.stringify(scores));
    console.log('Updated Scores:', scores);
}


// function ro index.html ze display vuqnat scores
    function displayScores() {
        const scores = JSON.parse(localStorage.getItem('scores')) || {}; // ukan amovighot score localstorage dan
        const leaderboard = document.getElementById('leaderboard');
        leaderboard.innerHTML = ""; // leaderboard antavisuflebs innerhtmls
    
        // scoreebs gadavuarot da chamovwerot leaderboardshi
        for (const [user, data] of Object.entries(scores)) {
            const userItem = document.createElement('li');
            userItem.classList.add('list-group-item');
        
            // total score user is gamovtvalot da gamovsaxot
            const totalScore = Object.values(data).filter(value => typeof value === 'number').reduce((sum, score) => sum + score, 0);
            userItem.textContent = `${user} - Total Score: ${totalScore} points`;
            
            // score ebistvis nested list 
            const quizList = document.createElement('ul');
            for (const [quizId, score] of Object.entries(data)) {
                const quizItem = document.createElement('li');
                quizItem.textContent = `Quiz ${quizId}: ${score} points`;
                quizList.appendChild(quizItem);
            }
    
            // append vuqnat quiz scorebs da total scorebt
            userItem.appendChild(quizList);
            leaderboard.appendChild(userItem);
        }
    }
    
// saitis bolomde chatvirtvas davelodot da daivwyot score display nu ise sheidzleba error gamowivios
document.addEventListener('DOMContentLoaded', function () {
    displayScores();
});

//daviwyot mtavari funkcia type shi
loadQuestion();
